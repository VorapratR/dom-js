<!DOCTYPE HTML>

<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
    <link rel="stylesheet" href="/css/cookieconsent.css">
    <title>Test-Consent-Cookie</title>
</head>

<body>
    <div id="cookieBar" class="container-fluid px-3 py-3 px-lg-4 py-lg-3  my-2 d-flexjustify-content-center fixed-bottom ">
        <div class="row">
            <div class="col-lg-8 d-flex align-items-center">
                <span id="messageInCookieBar">
                    <a id="privacyPolicy" target="_blank"></a>
                    <span id="and" class="ml-1">
                        <a id="cookiePolicy" target="_blank"></a>
                    </span>
                </span>
            </div>
            <div class="col-md my-1 py-0 d-flex align-items-center">
                <button id="editCookie" type="button" class="btn btn-outline-primary btn-block " data-toggle="modal" data-target="#modalModifyCookie">
                </button>
            </div>
            <div class="col-md  my-1  py-0  d-flex align-items-center">
                <button id="submitCookie" type="button" class="btn btn-primary btn-block" onclick="saveCookie()"></button>
            </div>
        </div>
    </div>

    <div class="tooltip-test">
        <button id="modifyModal" class="btn cookie-btn btn-light fixed-bottom mb-2 ml-1 " data-toggle="modal" data-target="#modalModifyCookie">
            <img src="https://cdn.jsdelivr.net/gh/VorapratR/dom-js@main/assets/images/cookies.png" width="30px" >
            <span class="tooltip-testtext">การตั้งค่าคุกกี้</span>
        </div>
    </div>


    <div class="modal fade" id="modalModifyCookie" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modalModifyCookie" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="model-header-no-bottom">
                    <div class="d-flex align-items-center">
                        <h5 class="modal-title mr-3" id="modalModifyCookieTitle"></h5>
                        <button id="allAccept" type="button" class="btn btn-primary px-md-3" onclick="saveAllAcceptClick()"> 
                    </div>
                    
                    </button>
        <button type="button" class="close" aria-label="Close" onclick="closeModal()">
                        <span aria-hidden="true">&times;</span>
                    </button>
    </div>
    <div class="px-3">
        <div class="card-black">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <b>
                        Necessary Cookies
                    </b>
                    <b class="text-primary ">
                        เปิดใช้งานตลอดเวลา
                    </b>
                </div>
                <div class="mt-1">
                    Necessary cookies are required to help a website usable by enabling core functions and access to secure areas of the website. The website cannot be function properly without these cookies and they are enabled by default and cannot be disabled
                </div>
            </div>
        </div>
        <div class="card-black">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <b class="mt-2">Analytics Cookies</b>
                    <input type="checkbox" id="analyticsCheckbox" data-toggle="toggle" data-size="sm">
                </div>
                <div class="mt-1">
                    Analytics cookies help website to understand how visitors interact through the website. These cookies help to improve user experiences by collecting and reporting information.
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer-no-top">
        <button id="saveAccept" type="button" class="btn btn-primary mx-1 px-3" onclick="saveAcceptClick()">
        </button>
    </div>
    </div>
    </div>
    </div>

    <script type="text/javascript">
        window.onload = function() {
            checkedConsentInApp();
            setDefaultInnerHTML();
            setDefaultHref();
            setDefaultCheckBox();
            setDefaultStyle();
        }

        function saveAcceptClick() {
            let dataCookie = {
                analytics: document.getElementById("analyticsCheckbox").checked
            }
            let newCookie = " consent-cookie-preference" + '=' + JSON.stringify(dataCookie) + ";"
            if (readCookie('consent-cookie')) {
                document.cookie = newCookie
                console.log(document.cookie);
            } else {
                document.cookie = "consent-cookie" + "=" + "allows" + ";"
                document.cookie = newCookie
                console.log(document.cookie);
            }
            $('#modalModifyCookie').modal('hide');
            checkedConsentInApp();

        }

        function saveAllAcceptClick() {
            document.getElementById("analyticsCheckbox").checked = true;
            saveAcceptClick();
        }

        function saveCookie() {
            // document.cookie = "consent-cookie" + "=" + "allows" + ";";
            // checkedConsentInApp();
            document.getElementById("analyticsCheckbox").checked = true;
            saveAcceptClick();
        }

        function checkedConsentInApp() {
            document.getElementById("cookieBar").style.cssText = "display:block"
            document.getElementById("modifyModal").style.cssText = 'display:none'
            if (readCookie('consent-cookie')) {
                if (readCookie('consent-cookie') == "allows") {
                    document.getElementById("cookieBar").style.cssText = 'display:none!important';
                    document.getElementById("modifyModal").style.cssText = 'display:block'
                }
            }
        }

        function setDefaultInnerHTML() {
            document.getElementById("messageInCookieBar").innerHTML = `
            บริษัท Test จำกัดใช้คุกกี้เพื่อให้ท่านได้รับประสบการณ์การใช้งานที่ดียิ่งขึ้น 
            <a id="privacyPolicy" target="_blank"></a>
            <span id="and" class="ml-1">
                <a id="cookiePolicy" target="_blank"></a>
            </span>
            `;
            document.getElementById("privacyPolicy").innerHTML = `อ่านนโยบายการคุ้มครองข้อมูลส่วนบุคคล`
            document.getElementById("and").innerHTML =
                `และ  <a id="cookiePolicy" target="_blank"></a>`
            document.getElementById("cookiePolicy").innerHTML =
                "นโยบายคุกกี้"
            document.getElementById("editCookie").innerHTML = "ปรับแต่งคุกกี้"
            document.getElementById("submitCookie").innerHTML = "ยอมรับทั้งหมด"
            document.getElementById("modalModifyCookieTitle").innerHTML = "การตั้งค่าคุกกี้"
                // document.getElementById("modalBodyMessage").innerHTML = "ข้าพเจ้ายินยอมให้ทางบริษัทใช้ Cookies ประเภท Analytics Cookies ที่ทำหน้าที่ประเมินประสิทธิ ภาพในการทำงานแต่ละส่วนของเว็บไซต์ และการปรับปรุง ซึ่งอาจเป็นส่วนที่บริษัทดำเนินการเอง หรือ ว่าจ้างบุคคลภายนอกดำเนินการดังกล่าวให้ โดยดำเนินการภายใต้ เงื่อนไขนโยบายข้อมูลส่วนบุคคลของ บริษัท"

            document.getElementById("saveAccept").innerHTML = "ยืนยันการเลือกของฉัน"
            document.getElementById("allAccept").innerHTML = "ยอมรับทั้งหมด"
        }

        function setDefaultCheckBox() {
            // document.getElementById("strictlyCheckbox").disabled = true
            // document.getElementById("strictlyCheckbox").checked = true
        }

        function setDefaultHref() {
            document.getElementById("privacyPolicy").href = "https://nawaplastic.com/th/privacy-policy.php";
            document.getElementById("cookiePolicy").href = "https://nawaplastic.com/th/privacy-policy.php";
        }

        function setDefaultStyle() {
            document.getElementById("modifyModal").style.zIndex = "5";
            document.getElementById("cookieBar").style.zIndex = "5";
            document.getElementById("cookieBar").style.border = "1px solid black";
            document.getElementById("cookieBar").style.borderRadius = "7px";

        }

        function closeModal() {
            if (!readCookie("consent-cookie-preference")) {
                document.getElementById("analyticsCheckbox").checked = false;
            }
            $('#modalModifyCookie').modal('hide');
        }

        // function addAnalytics() {
        //     window.dataLayer = window.dataLayer || [];

        //     function gtag() {
        //         dataLayer.push(arguments);
        //     }

        //     gtag('js', new Date());
        //     gtag('config', propertyID);
        // }

        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    </script>
</body>

</html>